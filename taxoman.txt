Описание: 
Ты - молодой, начинающий таксист, который взял в кредит тачку и теперь таксует, чтобы расплатиться за нее.
По мере работы машина расходует бензин, её надо вовремя заправлять.
Помимо этого, изнашиваются детали, поэтому для ремонта её следует периодически загонять в автосервисы.
Пассажиры не всегда честны, тебе следует научиться распознавать ненадежных и уметь торговаться.
Отдых и труд должны гармонично сочетаться в тебе. Повышенная утомляемость, плохое состояние машины провоцирует риск ДТП.


-------------------------------------------------
-= Константы =-

Макс. отдых водителя = 8 часов (rest_norm)
Макс. объем бака машины = 50 литров (max_fuel)
Норма расхода бензина = 0.1 л/км (fuel_base_consumption)
Базовая единица инфляции: 100 монет (Inflation)
Базовая цена литра бензина = Инфляция/5 (fuel_base_cost)
Базовое время поездки =  0.03 часа/1 км (trip_base_time) // или 20минут/10км пути в обычных условиях
Базовое загрязнение машины = 0.2 (car_base_dirtness) // 1% загрязнения на 5 км
Первоначальная цена машины: 300 000 (car_base_cost)
Максимальный пробег двигателя: 300 000 км (car_engine_resource)
Максимальное время ремонта машины: 72 часа (car_max_repair_time) // двиг чинят за 3 дня
Базовый износ машины: 0.0003 (car_base_amortization) // 100% износа за 300000 км
Сумма кредита: 300000 (credit_sum)
Кол-во дней выплаты кредита: 3*365 = 1095 (credit_days) // 3 года
Выплата в день: 300000/1095 (credit_day_payment)
Макс. народный негатив: people_negative_max=50
Цена книги по психологии таксистов: driver_pshyco_book_cost = 2*Inflation

Дорога (road_quality)
  плохая (2)
  нормальная (1)
  хорошая (0)

Погода (weather)
  плохая (2)
  нормальная (1)
  хорошая (0)

Время суток (is_daytime)
  день (1)
  ночь (0)

Состояние клиента (client_state)
  плохое (2)
  нормальное (1)
  отличное (0)

Типы клиентов (client_type)
  Студент (1)
  Блатной (2)
  Нерусский (3)
  Военный (4)
  Бизнесмен (5)
  Нарк (6)
  Дама (7)
  Пьяный (8)

Срочность поездки (urgency)
  обычная (1)
  срочная (2)

Места (places)
*  Универ, Библиотека (1)
*  Северный, Кабак (2)
*  Малибу (3)
*  Вокзал, Станция, перон (4)
*  Аптека (5)
*  Базар, Рынок, Черкизон, Шмотковальня (6)
*  поселок Ракетный, Пригород, Барвиха, Полигон, Палаточный, окраина (7)
*  Т.центр, SPA-салон, Банкомат, Магазин (8)
*  Мэрия (9)
*  Бар, Барсук (10)
*  Хачевня, Шашлычка, Ристоран (11)
*  Казино, Фортуна (12)

  ул.Ботаническая (20)
  ул.Ямская (21)
  ул.Петропавловская (22)
  ул.Тверская (23)
  ул.Замоскворецкая (24)

-= Переменные и допустимые значения =-

время игры: 0- (game_hours)
деньги: 0- (money)
отдых водителя: 0-8 часов (driver_rest_hours)
бак машины: 0-50 литров (fuel)
дистанция поездки: 0- (distance)
цена литра бензина на АЗС: 0- (fuel_cost)
время суток: 9-19 день, остальное ночь
чистота машины: 0-100 % (car_cleanness)
тех состояние машины: 0-100 % (car_state)
Пробег машины: 0- (car_mileage)
Остаток по кредиту: (credit_rest)
Оплачено по кредиту: (credit_payment_sum)
Состояние клиента: 0-4 (client_state)
Срочно ехать: 1,2 (urgency)
Макс. возможная просрочка кредита: 0- (credit_fine)
Народный негатив: 0..people_negative_max (people_negative)
Книга по психологии таксистов: driver_pshyco_book

-= Формулы =-

========= ПОЕЗДКА ===============================

*Цена бензина на АЗС // 0-15% надбавка к базовой цене литра бензина
  fuel_cost = (fuel_base_cost*(1+random*0.15)):1;

*Расход бензина для поездки, учитывая все условия
  trip_fuel = distance * fuel_base_consumption * urgency * (2 - car_state/100) * (1 + random*road_quality/10 + random*weather/10 + random*is_daytime);
  trip_fuel = trip_fuel:1;

*Время, потраченное на поездку, на основе расхода бензина
  trip_time = (trip_fuel / fuel_base_consumption * trip_base_time / urgency):1;

*Усталость водителя от поездки 
  driver_fatigue_time = (urgency * (2-car_state/100) * trip_time):1;

*Загрязнение машины
  car_dirtness  = (distance * car_base_dirtness * (1 + weather * urgency * 0.5)):0;

*Износ машины 
  car_amortization = car_base_amortization * urgency * distance * (2 - car_state/100) * (1 + random*road_quality/10 + random*weather/10 + random*is_daytime);

*Базовая себестоимость поездки // во сколько водителю обойдется бензин
  trip_base_cost = trip_fuel * fuel_base_cost;
//  trip_base_cost = distance*fuel_base_consumption*urgency*fuel_base_cost;

Вероятность попадания в пробку (traffic_congestion)
  (is_daytime) && (random * people_negative_max / 2 < people_negative)

Вероятность нападения бандита
  random * people_negative_max / 2 < people_negative


========= КЛИЕНТЫ ===============================

Вероятность встретить определенный тип клиента:
                    Машина (мин параметры, необходимые для клиента)
                  Чистота  Состояние  Ночь/День
  Студент (1)       20%       20%      30%  70%
  Блатной (2)       80%       50%      50%  50%  
  Нерусский (3)     0%        0%       40%  60%
  Военный (4)       50%       50%      50%  50%
  Бизнесмен (5)     70%       50%      20%  80%  
  Нарк (6)          0 %       0%       50%  50%
  Дама (7)          50%       30%      20%  80%
  Пьяный (8)        20%       0%       80%  20%



Диапазоны цен (*Inflation), которые клиент предлагает за поездку 10 км (client_max_price, client_mid_price, client_min_price)
                 Цена поездки от Настроения
                Отличное  Нормальное  Плохое
  Студент (1)       2         1         0.5      
  Блатной (2)       5         2         1
  Нерусский (3)     3         1         0.5
  Военный (4)       2         1         1
  Бизнесмен (5)     5         3         2   
  Нарк (6)          5         2         0
  Дама (7)          5         1         1
  Пьяный (8)        9         3         0

Длина и срочность поездки клиента (distance, urgency)
                  Длина поездки    Срочность
  Студент (1)       3-7               50%
  Блатной (2)       1-10              20%
  Нерусский (3)     5-10              40%
  Военный (4)       7-10              60%
  Бизнесмен (5)     1-10              80%
  Нарк (6)          3-7               90%
  Дама (7)          1-5               70%
  Пьяный (8)        1-10              30%

Вероятность, что клиент заплатит деньги (client_base_payable_rate)

  Студент (1)       70%
  Блатной (2)       80%
  Нерусский (3)     60%
  Военный (4)       100%
  Бизнесмен (5)     90%
  Нарк (6)          50%
  Дама (7)          90%
  Пьяный (8)        70%

Формула вероятности, что клиент заплатит деньги:
  client_payable_rate = client_base_payable_rate * (1 - people_negative/people_negative_max)

Вероятность, что клиент будет торговаться (client_bargain)

  Студент (1)       80%
  Блатной (2)       20%
  Нерусский (3)     90%
  Военный (4)       0%
  Бизнесмен (5)     40%
  Нарк (6)          50%
  Дама (7)          60%
  Пьяный (8)        20%

Важные факторы для поездки у клиентов (weather, is_daytime, urgency)

  Студент (1)       состояние авто, чистота авто, срочность
  Блатной (2)       состояние авто, чистота авто, погода, срочность
  Нерусский (3)     срочность, ночь
  Военный (4)       срочность
  Бизнесмен (5)     состояние авто, чистота авто, срочность, погода, ночь
  Нарк (6)          срочность, ночь
  Дама (7)          состояние авто, чистота авто, срочность, погода, ночь
  Пьяный (8)        срочность, погода

Формула торга клиента ()
  client_price = client_price + (client_max_price-client_price)/2 * client_type_coef * (1-people_negative/people_negative_max);


Разность цен(*Inflation) при торге, при которой клиент согласится с ценой водителя (client_delta_price)

  Студент (1)       0.2
  Блатной (2)       0.5
  Нерусский (3)     0.2
  Военный (4)       0.1
  Бизнесмен (5)     1.0
  Нарк (6)          0.5
  Дама (7)          1.0
  Пьяный (8)        1.0

Вероятность обитание определенного типа клиентов в различных местах (день/ночь в %)

                  Универ   Северный Малибу Вокзал Аптека  Базар   Пригород Т.центр Мэрия   Бар     Хачевня  Казино Улица(любая)
  Студент (1)     100/50   30/70    0/10   50/50  30/30   40/0    50/50    50/30   5/0     0/30    50/50    0/30   20/20
  Блатной (2)     50/10    90/90    0/10   70/30  30/30   100/30  20/10    50/30   30/0    30/80   50/70    0/50   20/20
  Нерусский (3)   10/0     20/30    0/0    90/90  0/0     100/80  80/50    20/0    10/0    5/10    100/100  0/10   20/20
  Военный (4)     30/10    10/30    0/10   50/50  30/30   30/0    30/50    20/10   30/0    30/30   20/20    0/30   20/20
  Бизнесмен (5)   70/50    10/10    50/90  60/10  50/50   50/10   5/5      90/50   90/50   50/70   5/5      10/80  20/20
  Нарк (6)        20/0     30/80    0/20   90/50  100/30  100/50  30/70    30/20   0/0     10/10   30/30    0/10   20/20
  Дама (7)        100/10   20/30    20/30  90/50  100/30  100/10  50/10    100/50  30/30   50/50   30/20    30/80  20/20
  Пьяный (8)      10/50    30/100   0/50   30/30  10/10   80/20   30/80    30/30   0/30    50/100  60/90    10/80  20/20




========= ДТП ========================================

Мастерство водителя
  driver_craft = (car_mileage/100000);
  if driver_craft > 1 {driver_craft= 1}

Процент повреждения машины в ДТП

  car_damage = 
    /*Базовая вероятность опасного момента 0.1 + 0.1 + 0.1 = от нуля до 0.3 макс*/
    random*road_quality/20 + random*weather/20 + random*is_daytime/10 +

    /*стандартный риск 0.2 + 0.2 + 0.2 = 0.6 макс*/
    (urgency - 1)/5 + (2-car_state/100)/5 + (rest_norm - driver_rest_hours) / rest_norm / 5 -

    /*Мастерство водителя: -0.9 макс*/
    driver_craft*0.9;

  car_damage = (car_damage * 100):0;

Процент "опасного момента" при вождении:
  random * 100 < car_damage

======== МАШИНА ============================================

Оставшаяся стоимость машины (без учета ДТП, ремонтов и прочего)
  car_remaining_cost = car_mileage / car_engine_resource * car_base_cost;

Текущая стоимость машины 
  car_current_cost = car_remaining_cost * car_state / 100;

Цена полного ремонта машины
  car_repair_cost = car_current_cost * car_state / 100;

Время ремонта машины
  car_repair_time = car_max_repair_time * car_state / 100;


========== КРЕДИТ ==========================

Сколько дней кредита уже было оплачено
  credit_payment_days = ((credit_sum - credit_rest_sum)/credit_day_payment):0;

Сколько дней кредита просрочено
  credit_delay_days = (game_hours / 24):0 - credit_payment_days;

Какая сумма кредита на текущий день просрочена
  credit_delay_sum = (credit_delay_days * credit_day_payment):2;

========== ДОБРО И ЗЛО =====================
Каждая доставка пассажира прибавляет 1 к благополучию народа
Каждая помощь бензином на дороге тоже
Каждая неудачная торговля с человеком вычитает 1 от благополучия народа
Благополучие влияет на криминальную обстановку в городе (грабежи)


Просто фразы клиентов во время поездки:

Друган, а ты свою тачку сам чинишь? Да. Молодец. Нет. Купи себе книгу по ремонту и чини, ничего трудного нет.
Шеф, у тебя скидка на заправках есть? Да. И у меня есть. Нет. Могу продать.
*Слышь, в инете какой то студент рацию продает, перехватчик vip клиентов такси, ничего не слышал о такой?
Не знаешь какой нибудь заброшенный гараж, где можно свою тачку самому починить?
Травматику что ли купить, а то нарки совсем обурели...
Купи себе книгу по ремонту авто, рекоммендую. Чтобы в сервисах не переплачивать.
*Совсем сервисмены оборзели! Дерут в три шкуры. Был бы у меня инструмент, сам бы чинил...
*Вчера в Северном кабаке драка была, одной телке даже силиконовый имплантант отрезали!
*Шеф, ты бесплатно часто катаешь?
*А если, предположим, у меня нет денег?
*Тут бабка сумашедшая не ездила?
*Что то не пойму, здесь блевотой что ли воняет...
Командир, в продаже появилась книга по психологии таксистов, ты её читал?
*Прикинь, поехал вчера машину помыть, попросили 300, приехал к ним через час, уже 200!
Как меня все достали...
Ну и денек сегодня выдался!
Решено! Завтра забухаю.
Надо срочно уматывать с этого города...
*Сейчас главное не уснуть!
*Слышал, говорят в наш город метеорит упадет. - Финал: метеорит падает на выплаченную тачку.
*А оказывается не все так плохо, оказывается бывает еще хуже...
*Вчера какой то тип в казино сто штук выиграл.




Бонусы от клиентов за бесплатный проезд:

1.Карточка скидки 20% на АЗС (Бизнесмен)
2.Местоположения "Заброшенный гараж" для ремонта авто (Военный)
3.Скидка 50% на питание шашлыками (Узбек) Когда голод подходит к 100% показывать запеченную курицу на экране
4.Обвес и Винил на машину (Блатной), для привлечения клиентов
5.VIP-рация (Студент), спаял сам
6.Интсрумент для ремонта авто (Нарк)
7.Травматический пистолет (Алкаш)
8.Показать сиськи (Женщина)

9.Ставка в казино. Поставить на зеро, выиграть 100 000 в казино